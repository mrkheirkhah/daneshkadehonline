<template>
  <div>
    <div class="frequent-questions">
      <div class="banner">
        <div class="bg-image"></div>
        <h2 class="title">سوالات متداول</h2>
        <div class="banner-overlay"></div>
      </div>
      <main class="container mt-5">
        <div class="main-detail">
          <!-- skeleton -->
          <template v-if="loading">
            <skeleton
              v-if="loading"
              class="skeleton"
              width="70%"
              height="20px"
              borderRadius="5px"
            />
            <br />
            <skeleton
              v-if="loading"
              class="skeleton mt"
              width="50%"
              height="20px"
              borderRadius="5px"
            />
            <br />
            <skeleton
              v-if="loading"
              class="skeleton mt"
              width="30%"
              height="20px"
              borderRadius="5px"
            />
          </template>
          <template v-else>
            <h3 class="rb-title">{{ pageData.pageTitle }}</h3>
            <div class="detail">{{ pageData.pageDescription }}</div>
          </template>
        </div>
        <div class="questions">
          <svg
            style="display: none"
            xmlns="http://www.w3.org/2000/svg"
            width="20.283"
            height="11.186"
            viewBox="0 0 20.283 11.186"
          >
            <symbol id="chevron-bottom">
              <g transform="translate(19.783 0.5) rotate(90)">
                <path
                  d="M 0.5465620756149292 19.533203125 C 0.3344920873641968 19.53319358825684 0.1346520781517029 19.45014381408691 -0.01613792590796947 19.29932403564453 C -0.1669379323720932 19.1485538482666 -0.2499979287385941 18.9487133026123 -0.2499979287385941 18.73664474487305 C -0.2499979287385941 18.52457427978516 -0.1669379323720932 18.32473373413086 -0.01611792482435703 18.17393493652344 L 8.515682220458984 9.642104148864746 L -0.01612792536616325 1.110284090042114 C -0.1669379323720932 0.9594740867614746 -0.2499979287385941 0.7596340775489807 -0.2499979287385941 0.5475740432739258 C -0.2499979287385941 0.3355140686035156 -0.1669379323720932 0.1356740593910217 -0.01611792482435703 -0.01513593830168247 C 0.1330820769071579 -0.1643859446048737 0.3374420702457428 -0.2499959319829941 0.5445320606231689 -0.2499959319829941 C 0.7571320533752441 -0.2499959319829941 0.9626920819282532 -0.1631759405136108 1.10850203037262 -0.01178593840450048 L 10.20180225372314 9.081423759460449 C 10.35131168365479 9.228103637695312 10.43513202667236 9.427173614501953 10.43614196777344 9.640284538269043 C 10.43716239929199 9.853493690490723 10.35536193847656 10.05325412750244 10.20581245422363 10.20279407501221 L 1.109242081642151 19.29934310913086 C 0.9584620594978333 19.45014381408691 0.7586320638656616 19.533203125 0.5465620756149292 19.533203125 Z"
                  stroke="none"
                />
                <path
                  d="M 0.5465608239173889 19.28319931030273 C 0.6859771013259888 19.28319931030273 0.8253920674324036 19.22965431213379 0.9324620962142944 19.1225643157959 L 10.02904224395752 10.02601432800293 C 10.23919200897217 9.815874099731445 10.23919200897217 9.468334197998047 10.02502250671387 9.258204460144043 L 0.9284420609474182 0.1616440564393997 C 0.8233520984649658 0.0525340624153614 0.6819520592689514 4.061584604642121e-06 0.5445320606231689 4.061584604642121e-06 C 0.4071520864963531 4.061584604642121e-06 0.2656820714473724 0.05658406019210815 0.1606520712375641 0.1616440564393997 C -0.0535479262471199 0.375834047794342 -0.0535479262471199 0.7193140387535095 0.1606520712375641 0.933504045009613 L 8.869241714477539 9.642104148864746 L 0.1606520712375641 18.3507137298584 C -0.0535479262471199 18.56489372253418 -0.0535479262471199 18.90839385986328 0.1606520712375641 19.1225643157959 C 0.2677270770072937 19.22965431213379 0.4071445763111115 19.28319931030273 0.5465608239173889 19.28319931030273 M 0.5465620756149292 19.783203125 C 0.2677220702171326 19.783203125 0.005102074705064297 19.67414474487305 -0.1929179280996323 19.47610473632812 C -0.3909279108047485 19.27812385559082 -0.4999979138374329 19.01549339294434 -0.4999979138374329 18.73664474487305 C -0.4999979138374329 18.45779418945312 -0.3909279108047485 18.1951732635498 -0.192887932062149 17.99714469909668 L 8.162142753601074 9.642104148864746 L -0.1928979307413101 1.287054061889648 C -0.3909279108047485 1.089034080505371 -0.4999979138374329 0.8264140486717224 -0.4999979138374329 0.5475740432739258 C -0.4999979138374329 0.2687340676784515 -0.3909279108047485 0.006114061456173658 -0.1928979307413101 -0.1919159442186356 C 0.002822074806317687 -0.3876859247684479 0.2716220617294312 -0.4999959468841553 0.5445320606231689 -0.4999959468841553 C 0.8231117725372314 -0.4999959468841553 1.092795729637146 -0.3865824639797211 1.285265922546387 -0.1886320412158966 L 10.37857246398926 8.904654502868652 C 10.57438182830811 9.096734046936035 10.68481254577637 9.35875415802002 10.68614196777344 9.639103889465332 C 10.68747234344482 9.919533729553223 10.57967185974121 10.18250370025635 10.38258171081543 10.37957382202148 L 1.286012053489685 19.47611427307129 C 1.088032126426697 19.67413330078125 0.8254120945930481 19.783203125 0.5465620756149292 19.783203125 Z"
                  stroke="none"
                />
              </g>
            </symbol>
          </svg>
          <svg
            style="display: none"
            xmlns="http://www.w3.org/2000/svg"
            width="43"
            height="43"
            viewBox="0 0 43 43"
          >
            <symbol id="qa-icon">
              <path
                d="M126.727,82.464l1.505.9a.717.717,0,0,0,.738-1.228l-1.33-.8a6.971,6.971,0,0,0,.96-3.605c0-3.161-1.928-5.733-4.3-5.733s-4.3,2.572-4.3,5.733,1.928,5.733,4.3,5.733a3.584,3.584,0,0,0,2.427-1Zm-5.293-4.73c0-2.331,1.313-4.3,2.867-4.3s2.867,1.969,2.867,4.3a5.591,5.591,0,0,1-.755,2.867l-1.026-.615a.717.717,0,0,0-.738,1.228l.772.463a2.023,2.023,0,0,1-1.119.357c-1.554,0-2.867-1.969-2.867-4.3Zm0,0"
                transform="translate(-109.251 -65.55)"
              />
              <path
                d="M268.973,264.473a.717.717,0,0,0-1.35,0l-3.583,10.033a.717.717,0,0,0,1.35.482l1.11-3.107h3.6l1.11,3.107a.717.717,0,1,0,1.35-.482Zm-1.961,5.974,1.286-3.6,1.29,3.6Zm0,0"
                transform="translate(-240.349 -240.347)"
              />
              <path
                d="M40.153,35.5A11.555,11.555,0,0,0,43,27.95c0-6.5-5.707-11.968-13.139-12.777A11.053,11.053,0,0,0,30.1,12.9C30.1,5.787,23.348,0,15.049,0S0,5.787,0,12.9a11.5,11.5,0,0,0,2.447,7.041l-2.4,6.321A.716.716,0,0,0,1,27.173L7.772,24.2a16.447,16.447,0,0,0,5.364,1.479A11.065,11.065,0,0,0,12.9,27.95c0,7.113,6.751,12.9,15.05,12.9a17.149,17.149,0,0,0,6.691-1.342l7.339,3.425A.717.717,0,0,0,42.941,42ZM7.5,22.75,1.993,25.172l1.935-5.1a.716.716,0,0,0-.115-.708A10.143,10.143,0,0,1,1.433,12.9c0-6.322,6.108-11.467,13.617-11.467S28.666,6.578,28.666,12.9a9.613,9.613,0,0,1-.388,2.7c-1.475,5.159-6.918,8.762-13.228,8.762-.323,0-.641-.006-.977-.034a15.128,15.128,0,0,1-5.961-1.566.717.717,0,0,0-.61-.016ZM34.953,38.072a.716.716,0,0,0-.6,0,15.659,15.659,0,0,1-6.406,1.348c-7.508,0-13.617-5.144-13.617-11.467a9.651,9.651,0,0,1,.245-2.156c.157.006.314.006.472.006q.641,0,1.27-.046c.143-.01.28-.031.422-.044.275-.027.551-.051.822-.09.167-.024.33-.059.494-.087.24-.042.482-.08.717-.132.175-.038.346-.086.519-.129.22-.055.442-.107.658-.171.176-.051.347-.113.521-.17.206-.068.413-.133.614-.209.174-.065.343-.139.514-.21.193-.079.387-.158.573-.244.171-.079.336-.166.5-.25s.362-.18.537-.277.325-.19.485-.287.337-.2.5-.308.31-.215.464-.322.312-.222.463-.338.293-.237.436-.358.287-.241.426-.366.272-.258.406-.388.263-.26.388-.394.25-.276.371-.418.237-.279.35-.421.224-.295.332-.444.215-.3.311-.449.2-.309.287-.466.184-.316.27-.478.166-.321.244-.484.156-.337.229-.508.135-.331.2-.5c.031-.086.071-.168.1-.254C36.3,17.2,41.566,22.112,41.566,27.95a10.209,10.209,0,0,1-2.781,6.935.717.717,0,0,0-.128.765l2.226,5.189Zm0,0"
                transform="translate(0)"
              />
            </symbol>
          </svg>
          <template v-if="loading">
            <skeleton
              v-for="i in 4"
              :key="i"
              class="skeleton mt"
              width="100%"
              height="55px"
              borderRadius="5px"
            />
          </template>
          <template v-else>
            <div
              class="custom-accordion question"
              @click="toggleAccordeon"
              v-for="question in questions"
              :key="question.id"
            >
              <header class="accordion-header">
                <div class="right">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="constant"
                    width="43"
                    height="43"
                    viewBox="0 0 43 43"
                  >
                    <use class="consumer" href="#qa-icon" />
                  </svg>
                  <h5>{{ question.title }}</h5>
                </div>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="arrow"
                  width="20.283"
                  height="11.186"
                >
                  <use class="consumer" href="#chevron-bottom" />
                </svg>
              </header>
              <div class="accordion-body">
                <p class="answer custom-scrollbar">{{ question.text }}</p>
              </div>
            </div>
          </template>
        </div>
      </main>
    </div>
  </div>
</template>
<script>
import skeleton from "@/components/skeleto-creator";
export default {
  components: { skeleton },
  layout: "mainPages",
  data() {
    return {
      pageData: "",
      questions: "",
      loading: true,
    };
  },
  async mounted() {
    await Promise.all([this.getPageData(), this.getQuestions()]);
    this.loading = false;
  },
  methods: {
    toggleAccordeon(event) {
      event.target.closest(".custom-accordion").classList.toggle("open");
    },
    async getPageData() {
      const pageData = await this.$axios.get("/api/Home/FrequentlyQuestionInfo");
      this.pageData = pageData.data.data;
    },
    async getQuestions() {
      const questions = await this.$axios.get("/api/Home/FrequentlyQuestions");
      this.questions = questions.data.data;
    },
  },
};
</script>
<style lang="scss">
@import "@/assets/swal-style.scss";
@import "@/assets/styles/pages/frequent-questions.scss";
</style>
